# 性能优化总结
## 前置阅读
* [实验环境准备](#/advance/env-ready) - 本文会基于实验环境说明相关内容，请先阅读！

## 优化的4个层次和漏斗法则
* <green><b>层次1： 高效SQL、索引。（减少数据访问）</b></green>
* <green><b>层级2： 合理的数据库结构设计、存储引擎、表字段设计。</b></green>（返回更少数据量，查询时只需返回必要字段）
* 层次3： 分库分区分表，如`proxy`架构的`mycat`；client架构的`sharding-jdbc`。（数据量大时，减少交互次数）
* 层次4： DB架构设计，主从复制、读写分离、分布式部署等。（增加资源）

<img src="/static/opt/funnel-principle.png" style="width: 600px;" />

**总结：目前层次多在1和2上，3和4只在大数据量和集群部署时用到。**

## 熟悉索引
MySQL中索引有主键索引、普通索引、唯一索引、组合索引等，其中主键索引也是聚集索引（在B+树种同时包含数据和主键key的）。

在学生表中：
* id 是主键索引，是聚集索引，同时包含数据与主键key； 
* name 是普通索引，不包含数据，只包含主键key；
* score 是普通索引，不包含数据，只包含主键key；
* age 和 score 是组合索引，不包含数据，只包含主键key。
